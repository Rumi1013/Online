<!-- Floating Magnolia Petals -->
<div class="floating-petals" aria-hidden="true">
  {% for i in (1..8) %}
    <div class="petal petal-{{ i }}" style="animation-delay: {{ i | times: 0.5 }}s;">
      {{ 'magnolia-flower.svg' | asset_url | image_tag:
        width: '60',
        height: '60',
        alt: '',
        class: 'petal-svg'
      }}
    </div>
  {% endfor %}
</div>

<!-- Floating Mystical Elements -->
<div class="mystical-elements" aria-hidden="true">
  {% for i in (1..6) %}
    <div class="mystical-element element-{{ i }}" style="animation-delay: {{ i | times: 0.8 }}s;">
      <svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
        <circle cx="20" cy="20" r="18" fill="none" stroke="rgba(246,213,92,0.3)" stroke-width="1"/>
        <circle cx="20" cy="20" r="12" fill="none" stroke="rgba(159,122,234,0.2)" stroke-width="1"/>
        <circle cx="20" cy="20" r="6" fill="none" stroke="rgba(163,177,138,0.4)" stroke-width="1"/>
        <circle cx="20" cy="20" r="2" fill="rgba(246,213,92,0.6)"/>
      </svg>
    </div>
  {% endfor %}
</div>

<style>
.floating-petals {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: -1;
  overflow: hidden;
}

.petal {
  position: absolute;
  opacity: 0.6;
  animation: floatPetal 15s ease-in-out infinite;
}

.petal-1 { top: 10%; left: 10%; }
.petal-2 { top: 20%; right: 15%; }
.petal-3 { top: 40%; left: 20%; }
.petal-4 { top: 60%; right: 10%; }
.petal-5 { top: 80%; left: 15%; }
.petal-6 { top: 30%; right: 25%; }
.petal-7 { top: 70%; left: 25%; }
.petal-8 { top: 50%; right: 20%; }

.petal-svg {
  width: 60px;
  height: 60px;
  filter: drop-shadow(0 2px 4px rgba(0,0,0,0.1));
}

.mystical-elements {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: -1;
}

.mystical-element {
  position: absolute;
  opacity: 0.4;
  animation: mysticalFloat 20s ease-in-out infinite;
}

.element-1 { top: 15%; left: 80%; }
.element-2 { top: 35%; right: 5%; }
.element-3 { top: 55%; left: 85%; }
.element-4 { top: 75%; right: 8%; }
.element-5 { top: 25%; left: 75%; }
.element-6 { top: 65%; right: 12%; }

@keyframes floatPetal {
  0%, 100% {
    transform: translateY(0px) rotate(0deg) scale(1);
    opacity: 0.4;
  }
  25% {
    transform: translateY(-20px) rotate(90deg) scale(1.1);
    opacity: 0.6;
  }
  50% {
    transform: translateY(-40px) rotate(180deg) scale(0.9);
    opacity: 0.5;
  }
  75% {
    transform: translateY(-20px) rotate(270deg) scale(1.05);
    opacity: 0.7;
  }
}

@keyframes mysticalFloat {
  0%, 100% {
    transform: translateY(0px) rotate(0deg);
    opacity: 0.3;
  }
  33% {
    transform: translateY(-30px) rotate(120deg);
    opacity: 0.5;
  }
  66% {
    transform: translateY(-15px) rotate(240deg);
    opacity: 0.4;
  }
}

/* Extra Small Devices (320px and up) */
@media (max-width: 320px) {
  .petal-svg {
    width: 30px;
    height: 30px;
  }

  .petal {
    opacity: 0.5;
  }

  .mystical-element {
    opacity: 0.3;
  }

  .petal-1, .petal-3, .petal-5, .petal-7 { display: none; } /* Reduce elements for performance */
  .element-2, .element-4, .element-6 { display: none; }
}

/* Small Devices (321px to 480px) */
@media (min-width: 321px) and (max-width: 480px) {
  .petal-svg {
    width: 35px;
    height: 35px;
  }

  .petal {
    opacity: 0.6;
  }

  .mystical-element {
    opacity: 0.4;
  }

  .petal-1, .petal-7 { display: none; } /* Reduce some elements */
  .element-2, .element-6 { display: none; }
}

/* Medium Devices (481px to 768px) */
@media (min-width: 481px) and (max-width: 768px) {
  .petal-svg {
    width: 45px;
    height: 45px;
  }

  .petal {
    opacity: 0.65;
  }

  .mystical-element {
    opacity: 0.45;
  }
}

/* Large Devices (769px to 1024px) */
@media (min-width: 769px) and (max-width: 1024px) {
  .petal-svg {
    width: 55px;
    height: 55px;
  }

  .petal {
    opacity: 0.7;
  }

  .mystical-element {
    opacity: 0.5;
  }
}

/* Extra Large Devices (1025px to 1440px) */
@media (min-width: 1025px) and (max-width: 1440px) {
  .petal-svg {
    width: 60px;
    height: 60px;
  }

  .petal {
    opacity: 0.75;
  }

  .mystical-element {
    opacity: 0.55;
  }
}

/* Ultra Large Devices (1441px and up) */
@media (min-width: 1441px) {
  .petal-svg {
    width: 65px;
    height: 65px;
  }

  .petal {
    opacity: 0.8;
  }

  .mystical-element {
    opacity: 0.6;
  }
}

@media (prefers-reduced-motion: reduce) {
  .petal, .mystical-element {
    animation: none;
  }
}

/* Touch device optimizations */
@media (hover: none) and (pointer: coarse) {
  .petal:hover, .mystical-element:hover {
    transform: none; /* Disable hover effects on touch devices */
  }
}

/* Performance optimization for low-end devices */
@media (max-width: 480px) and (-webkit-min-device-pixel-ratio: 2) {
  .floating-petals, .mystical-elements {
    will-change: auto; /* Disable will-change for better performance */
  }

  .petal, .mystical-element {
    animation-duration: 20s; /* Slower animations for performance */
  }
}
</style>