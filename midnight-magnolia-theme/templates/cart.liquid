{%- comment -%}
  Cart template for viewing cart contents
{%- endcomment -%}

<div class="cart-page">
  <div class="container">
    <h1 class="cart-title">{{ 'sections.cart.title' | t }}</h1>
    
    {%- if cart != empty -%}
      <form action="{{ routes.cart_url }}" method="post" novalidate class="cart-form">
        <div class="cart-items" id="main-cart-items" data-id="{{ section.id }}">
          <div class="js-contents">
            {%- for item in cart.items -%}
              <div class="cart-item" id="CartItem-{{ item.index | plus: 1 }}">
                <div class="cart-item__media">
                  {%- if item.image -%}
                    <img
                      class="cart-item__image"
                      src="{{ item.image | image_url: width: 300 }}"
                      alt="{{ item.image.alt | escape }}"
                      loading="lazy"
                      width="150"
                      height="{{ 150 | divided_by: item.image.aspect_ratio | ceil }}"
                    >
                  {%- endif -%}
                </div>

                <div class="cart-item__details">
                  <a href="{{ item.url }}" class="cart-item__name">{{ item.product.title | escape }}</a>
                  
                  {%- if item.original_price != item.final_price -%}
                    <div class="cart-item__discounted-prices">
                      <s class="cart-item__old-price">{{ item.original_price | money }}</s>
                      <strong class="cart-item__final-price">{{ item.final_price | money }}</strong>
                    </div>
                  {%- else -%}
                    <div class="cart-item__price">{{ item.original_price | money }}</div>
                  {%- endif -%}

                  {%- if item.product.has_only_default_variant == false -%}
                    <dl class="cart-item__options">
                      {%- for option in item.options_with_values -%}
                        <div class="product-option">
                          <dt>{{ option.name }}: </dt>
                          <dd>{{ option.value }}</dd>
                        </div>
                      {%- endfor -%}
                    </dl>
                  {%- endif -%}

                  <div class="cart-item__quantity">
                    <quantity-input class="quantity">
                      <button class="quantity__button" name="minus" type="button">
                        <span class="visually-hidden">Decrease quantity</span>
                        âˆ’
                      </button>
                      <input
                        class="quantity__input"
                        type="number"
                        name="updates[]"
                        value="{{ item.quantity }}"
                        min="0"
                        data-index="{{ item.index | plus: 1 }}"
                        id="Quantity-{{ item.index | plus: 1 }}"
                      >
                      <button class="quantity__button" name="plus" type="button">
                        <span class="visually-hidden">Increase quantity</span>
                        +
                      </button>
                    </quantity-input>

                    <cart-remove-button data-index="{{ item.index | plus: 1 }}">
                      <button type="button" class="button button--tertiary">
                        {{ 'sections.cart.remove_title' | t: title: item.title }}
                      </button>
                    </cart-remove-button>
                  </div>
                </div>
              </div>
            {%- endfor -%}
          </div>
        </div>

        <div class="cart-footer">
          <div class="cart-note">
            <label for="cart-note">{{ 'sections.cart.note' | t }}</label>
            <textarea name="note" id="cart-note" placeholder="{{ 'sections.cart.note' | t }}">{{ cart.note }}</textarea>
          </div>

          <div class="cart-summary">
            <div class="cart-total">
              <h3>{{ 'sections.cart.estimated_total' | t }}</h3>
              <p class="cart-total-price">{{ cart.total_price | money_with_currency }}</p>
            </div>

            <div class="cart-actions">
              <button type="submit" name="update" class="button button--secondary">
                {{ 'sections.cart.update' | t }}
              </button>
              <button type="submit" name="add" formaction="{{ routes.cart_url }}" class="button button--primary cart-checkout-btn">
                {{ 'sections.cart.checkout' | t }}
              </button>
            </div>
          </div>
        </div>
      </form>
    {%- else -%}
      <div class="cart-empty">
        <h2>{{ 'sections.cart.empty' | t }}</h2>
        <a href="{{ routes.all_products_collection_url }}" class="button button--primary">
          {{ 'sections.cart.continue_shopping' | t }}
        </a>
      </div>
    {%- endif -%}
  </div>
</div>

<cart-items class="cart-items">
  <!-- Cart items component will be rendered here -->
</cart-items>